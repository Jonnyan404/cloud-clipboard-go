name = "cloud-clipboard-worker"
main = "src/index.js"
compatibility_date = "2024-01-15"
compatibility_flags = ["nodejs_compat"]

# 环境变量
[vars]
AUTH_PASSWORD = "123"
HISTORY_LIMIT = "5"
TEXT_LIMIT = "40960"
FILE_LIMIT = "204857600"
FILE_EXPIRE = "3600"

# D1 数据库绑定 (将被自动更新)
[[d1_databases]]
binding = "DB"
database_name = "cloud-clipboard-db"
database_id = "your-d1-database-id"

# R2 存储绑定
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "cloud-clipboard-files"

# Durable Objects
[[durable_objects.bindings]]
name = "WEBSOCKET_ROOM"
class_name = "WebSocketRoom"
script_name = "cloud-clipboard-worker"

# Durable Objects 迁移
[[migrations]]
tag = "v1"
new_sqlite_classes = ["WebSocketRoom"]