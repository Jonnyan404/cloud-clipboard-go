(function(e){function t(t){for(var i,r,n=t[0],l=t[1],c=t[2],m=0,u=[];m<n.length;m++)r=n[m],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],i=!0,n=1;n<o.length;n++){var l=o[n];0!==s[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var i={},s={app:0},a=[];function r(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=i,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0423":function(e){e.exports=JSON.parse('{"clipboard":"クリップボード","deviceList":"デバイスリスト","darkMode":"ダークモード","switchByTime":"時間によって切り替え","switchByTimeDesc":"19:00 から翌 7:00 まで有効","switchBySystem":"システム設定によって切り替え","switchBySystemDesc":"prefers-color-scheme を使用して検出","keepEnabled":"有効のままにする","keepDisabled":"無効のままにする","changeThemeColor":"テーマカラーを変更","about":"概要","language":"言語","cloudClipboard":"クラウドクリップボード","room":"ルーム","copyRoomName":"クリックしてコピー","copiedRoomName":"ルーム名をコピーしました：{room}","copyFailed":"コピーに失敗しました：{err}","clearClipboard":"クリップボードをクリア","enterRoom":"ルームに入る","connected":"接続済み","connecting":"接続中","disconnected":"未接続、クリックして再接続","selectThemeColor":"テーマカラーを選択","ok":"OK","cancel":"キャンセル","authRequired":"認証が必要です","authPrompt":"このクリップボードサービスは公開されていません。接続を続けるにはパスワードを入力してください。","password":"パスワード","submit":"送信","clipboardRoom":"クリップボードルーム","roomPrompt1":"任意の名前を入力して新しいルームを作成するか、既存のルームに参加します。空欄の場合はデフォルトのグローバルルームを使用します。","roomPrompt2":"ルームで送信されたコンテンツは、そのルーム内でのみ表示されます。保存される履歴レコードの数は、引き続きグローバル設定によって制限されます。","roomName":"ルーム名","clearClipboardConfirmTitle":"クリップボードをクリア","clearClipboardConfirmText":"現在のルームのすべてのクリップボードコンテンツをクリアしてもよろしいですか？","sendText":"テキストを送信","sendFile":"ファイルを送信","enterTextToSend":"送信するテキストを入力してください","send":"送信","selectFileToSend":"送信するファイルを選択","dragDropPasteTip":"（ドラッグ＆ドロップと Ctrl+V でのスクリーンショット貼り付けをサポート）","fileSizeLimit":"ファイルサイズ制限：{limit}","textMessage":"テキストメッセージ","copyText":"テキストをコピー","copyLink":"リンクをコピー","delete":"削除","fileMessage":"ファイルメッセージ","fileSize":"ファイルサイズ","expiredAt":"{time} に期限切れ","willExpireAt":"{time} に期限切れになります","download":"ダウンロード","expired":"期限切れ","preview":"プレビュー","alreadyAtBottom":"すでに一番下です～","emptyHere":"ここには何もありません","connectedDevices":"接続されているデバイスリスト","devicesConnected":"{count} 個のデバイスが接続されています。デスクトップデバイス {desktop} 個、モバイルデバイス {mobile} 個。","notConnectedToServer":"サーバーに接続されていません。","desktopDevice":"デスクトップデバイス","mobileDevice":"モバイルデバイス","otherDevice":"その他のデバイスタイプ","aboutTitle":"クラウドクリップボード {version}","aboutDesc1":"ローカルネットワーク内でプレーンテキストとファイルを転送するためのクラウドクリップボード","aboutDesc2":"すぐに使えるウェブ版、アプリのインストールは不要","donatePrompt":"このツールが役に立ったと思われたら、開発者をサポートするために寄付をご検討ください～","cannotSendEmptyFile":"空のファイルは送信できません","fileSizeExceeded":"ファイルサイズが制限を超えています（{limit}）","sendSuccess":"送信成功","sendFailed":"送信失敗","sendFailedMsg":"送信失敗：{msg}","fileFetchFailed":"ファイルの取得に失敗しました","fileFetchFailedMsg":"ファイルの取得に失敗しました：{msg}","copySuccess":"コピー成功","copyFailedGeneral":"コピー失敗","copyFailedError":"コピー失敗：{err}","deleteSuccessFile":"ファイル {name} を削除しました","deleteFailedFile":"ファイルの削除に失敗しました","deleteFailedFileMsg":"ファイルの削除に失敗しました：{msg}","deleteFailedMessage":"メッセージの削除に失敗しました","deleteFailedMessageMsg":"メッセージの削除に失敗しました：{msg}","deleteSuccessText":"テキストメッセージを削除しました","clearClipboardFailed":"クリップボードのクリアに失敗しました","clearClipboardFailedMsg":"クリップボードのクリアに失敗しました：{msg}","connectingServer":"サーバーに接続中...","reconnectingServer":"サーバーへの接続に失敗しました。{retry} 回目の再接続を試行中...","connectionSuccess":"サーバーへの接続に成功しました","connectionFailedRetry":"サーバーへの接続に失敗しました。ツールバーの「接続」アイコンをクリックして再試行してください","displaySettings":"表示設定","showTimestamp":"タイムスタンプを表示","showDeviceInfo":"デバイス情報を表示","showSenderIP":"送信者IPを表示","clipboardClearedRefresh":"クリップボードがクリアされました、ページを更新して有効にしてください","showQrCode":"QRコードを表示","scanToAccess":"スキャンしてアクセス","close":"閉じる","scanToAccessPage":"スマホでスキャンして現在のページにアクセス","roomList":"ルームリスト","rooms":"ルーム","searchRooms":"ルームを検索...","loadingRooms":"ルームリストを読み込み中...","noRoomsFound":"ルームが見つかりません","publicRoom":"パブリックルーム","active":"アクティブ","inactive":"非アクティブ","messages":"メッセージ","devices":"デバイス","lastActive":"最後のアクティビティ","never":"なし","justNow":"たった今","minutesAgo":"{minutes} 分前","hoursAgo":"{hours} 時間前","daysAgo":"{days} 日前","failedToLoadRooms":"ルームリストの読み込みに失敗しました","addedToFavorites":"{room} をお気に入りに追加しました","removedFromFavorites":"{room} をお気に入りから削除しました"}')},"108b":function(e,t,o){},3504:function(e){e.exports=JSON.parse('{"clipboard":"剪贴板","deviceList":"设备列表","darkMode":"深色模式","switchByTime":"根据时间切换","switchByTimeDesc":"在 19:00 到次日 7:00 期间启用","switchBySystem":"根据系统设置切换","switchBySystemDesc":"使用 prefers-color-scheme 检测","keepEnabled":"保持启用","keepDisabled":"保持禁用","changeThemeColor":"更改主题色","about":"关于","language":"语言","cloudClipboard":"云剪贴板","room":"房间","copyRoomName":"点击复制","copiedRoomName":"已复制房间名称：{room}","copyFailed":"复制失败：{err}","clearClipboard":"清空剪贴板","enterRoom":"进入房间","connected":"已连接","connecting":"连接中","disconnected":"未连接，点击重连","selectThemeColor":"选择主题颜色","ok":"确定","cancel":"取消","authRequired":"需要认证","authPrompt":"这个剪贴板服务并不是公开的，请输入密码以继续连接。","password":"密码","submit":"提交","clipboardRoom":"剪贴板房间","roomPrompt1":"输入任意名称创建新房间，或进入已有的房间。留空则表示使用默认的全局房间。","roomPrompt2":"在房间中发送的内容仅限房间内可见，保存的历史记录数量仍然会受到全局设定的限制。","roomName":"房间名称","clearClipboardConfirmTitle":"清空剪贴板","clearClipboardConfirmText":"是否要清空当前房间的所有剪贴板内容？","sendText":"发送文本","sendFile":"发送文件","enterTextToSend":"请输入需要发送的文本","send":"发送","selectFileToSend":"选择要发送的文件","dragDropPasteTip":"（支持拖拽和 Ctrl+V 粘贴截图）","fileSizeLimit":"文件大小限制：{limit}","textMessage":"文本消息","copyText":"复制文本","copyLink":"复制链接","delete":"删除","fileMessage":"文件消息","fileSize":"文件大小","expiredAt":"已于 {time} 过期","willExpireAt":"将于 {time} 过期","download":"下载","expired":"已过期","preview":"预览","alreadyAtBottom":"已经到底了哦～","emptyHere":"这里空空的","connectedDevices":"已连接的设备列表","devicesConnected":"已有 {count} 个设备连接，桌面端设备 {desktop} 个，移动端设备 {mobile} 个。","notConnectedToServer":"未连接到服务器。","desktopDevice":"桌面端设备","mobileDevice":"移动端设备","otherDevice":"其他类型设备","aboutTitle":"云剪贴板 {version}","aboutDesc1":"在局域网内互传纯文本和文件的云剪贴板","aboutDesc2":"即开即用的网页版，无须安装 APP","donatePrompt":"如果你觉得这个工具很好用，欢迎捐赠支持开发者～","cannotSendEmptyFile":"不能发送空文件","fileSizeExceeded":"文件大小超过限制（{limit}）","sendSuccess":"发送成功","sendFailed":"发送失败","sendFailedMsg":"发送失败：{msg}","fileFetchFailed":"文件获取失败","fileFetchFailedMsg":"文件获取失败：{msg}","copySuccess":"复制成功","copyFailedGeneral":"复制失败","copyFailedError":"复制失败：{err}","deleteSuccessFile":"已删除文件 {name}","deleteFailedFile":"文件删除失败","deleteFailedFileMsg":"文件删除失败：{msg}","deleteFailedMessage":"消息删除失败","deleteFailedMessageMsg":"消息删除失败：{msg}","deleteSuccessText":"已删除文本消息","clearClipboardFailed":"清空剪贴板失败","clearClipboardFailedMsg":"清空剪贴板失败：{msg}","connectingServer":"正在连接服务器……","reconnectingServer":"未能连接到服务器，正在尝试第 {retry} 次重连……","connectionSuccess":"连接服务器成功","connectionFailedRetry":"连接服务器失败，请点击工具栏上的“连接”图标重试","displaySettings":"显示设置","showTimestamp":"显示时间戳","showDeviceInfo":"显示设备信息","showSenderIP":"显示发送者IP","clipboardClearedRefresh":"剪贴板已清空，刷新当前页面生效","showQrCode":"显示二维码","scanToAccess":"扫码访问","close":"关闭","scanToAccessPage":"手机扫码访问当前页面","roomList":"房间列表","rooms":"个房间","loadingRooms":"正在加载房间...","noRoomsFound":"未找到房间","searchRooms":"搜索房间","publicRoom":"公共房间","messages":"消息","devices":"设备","lastActive":"最后活跃","active":"活跃","inactive":"非活跃","never":"从未","justNow":"刚刚","minutesAgo":"{minutes}分钟前","hoursAgo":"{hours}小时前","daysAgo":"{days}天前","failedToLoadRooms":"加载房间列表失败","addedToFavorites":"已将 {room} 添加到收藏","removedFromFavorites":"已将 {room} 从收藏中移除"}')},5197:function(e,t,o){"use strict";o("108b")},"56d7":function(e,t,o){"use strict";o.r(t);o("e9f5"),o("910d");var i=o("2b0e"),s=o("0798"),a=o("7496"),r=o("40dc"),n=o("5bc1"),l=o("4ca6"),c=o("288c"),d=o("8336"),m=o("b0af"),u=o("99d9"),p=o("cc20"),h=o("62ad"),v=o("03a4"),g=o("169a"),f=o("ce7e"),y=o("132d"),b=o("8860"),_=o("da13"),$=o("1800"),w=o("5d23"),C=o("1baa"),k=o("34c3"),x=o("f6c4"),S=o("e449"),D=o("f774"),F=o("490a"),T=o("0fd9"),P=o("2fa4"),R=o("e0c7"),I=o("b73d"),A=o("8654"),L=o("2a7f"),M=o("3a2f"),z=(o("14d9"),function(){var e=this,t=e._self._c;return t(a["a"],[t(D["a"],{attrs:{temporary:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(b["a"],[t(_["a"],{attrs:{link:"",href:"#/?room="+e.$root.room}},[t($["a"],[t(y["a"],[e._v(e._s(e.mdiContentPaste))])],1),t(w["a"],[t(w["c"],[e._v(e._s(e.$t("clipboard")))])],1)],1),t(_["a"],{attrs:{link:"",href:"#/device"}},[t($["a"],[t(y["a"],[e._v(e._s(e.mdiDevices))])],1),t(w["a"],[t(w["c"],[e._v(e._s(e.$t("deviceList")))])],1)],1),t(S["a"],{attrs:{"offset-x":"",transition:"slide-x-transition","open-on-click":"","open-on-hover":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(_["a"],e._g({attrs:{link:""}},o),[t($["a"],[t(y["a"],[e._v(e._s(e.mdiBrightness4))])],1),t(w["a"],[t(w["c"],[e._v(e._s(e.$t("darkMode")))])],1)],1)]}}])},[t(b["a"],{attrs:{"two-line":""}},[t(C["a"],{attrs:{color:"primary",mandatory:""},model:{value:e.$root.dark,callback:function(t){e.$set(e.$root,"dark",t)},expression:"$root.dark"}},[t(_["a"],{attrs:{link:"",value:"time"}},[t(w["a"],[t(w["c"],[e._v(e._s(e.$t("switchByTime")))]),t(w["b"],[e._v(e._s(e.$t("switchByTimeDesc")))])],1)],1),t(_["a"],{attrs:{link:"",value:"prefer"}},[t(w["a"],[t(w["c"],[e._v(e._s(e.$t("switchBySystem")))]),t(w["b"],[t("code",[e._v("prefers-color-scheme")]),e._v(" "+e._s(e.$t("switchBySystemDesc")))])],1)],1),t(_["a"],{attrs:{link:"",value:"enable"}},[t(w["a"],[t(w["c"],[e._v(e._s(e.$t("keepEnabled")))])],1)],1),t(_["a"],{attrs:{link:"",value:"disable"}},[t(w["a"],[t(w["c"],[e._v(e._s(e.$t("keepDisabled")))])],1)],1)],1)],1)],1),t(_["a"],{attrs:{link:""},on:{click:function(t){e.colorDialog=!0,e.drawer=!1}}},[t($["a"],[t(y["a"],[e._v(e._s(e.mdiPalette))])],1),t(w["a"],[t(w["c"],[e._v(e._s(e.$t("changeThemeColor")))])],1)],1),t(S["a"],{attrs:{"offset-x":"",transition:"slide-x-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(_["a"],e._g({attrs:{link:""}},o),[t($["a"],[t(y["a"],[e._v(e._s(e.mdiTranslate))])],1),t(w["a"],[t(w["c"],[e._v(e._s(e.$t("language")))]),t(w["b"],[e._v(e._s(e.currentLanguageName))])],1)],1)]}}])},[t(b["a"],[t(_["a"],{on:{click:function(t){return e.changeLocale("zh")}}},[t(w["c"],[e._v("简体中文")])],1),t(_["a"],{on:{click:function(t){return e.changeLocale("zh-TW")}}},[t(w["c"],[e._v("繁體中文")])],1),t(_["a"],{on:{click:function(t){return e.changeLocale("en")}}},[t(w["c"],[e._v("English")])],1),t(_["a"],{on:{click:function(t){return e.changeLocale("ja")}}},[t(w["c"],[e._v("日本語")])],1)],1)],1),t(f["a"]),t(R["a"],[e._v(e._s(e.$t("displaySettings")))]),t(_["a"],[t(k["a"],[t(y["a"],[e._v(e._s(e.mdiClockOutline))])],1),t(w["a"],{staticStyle:{cursor:"pointer"},on:{click:function(t){e.$root.showTimestamp=!e.$root.showTimestamp}}},[t(w["c"],[e._v(e._s(e.$t("showTimestamp")))])],1),t($["a"],[t(I["a"],{staticClass:"ma-0 pa-0",attrs:{color:"primary","hide-details":""},model:{value:e.$root.showTimestamp,callback:function(t){e.$set(e.$root,"showTimestamp",t)},expression:"$root.showTimestamp"}})],1)],1),t(_["a"],[t(k["a"],[t(y["a"],[e._v(e._s(e.mdiDevices))])],1),t(w["a"],{staticStyle:{cursor:"pointer"},on:{click:function(t){e.$root.showDeviceInfo=!e.$root.showDeviceInfo}}},[t(w["c"],[e._v(e._s(e.$t("showDeviceInfo")))])],1),t($["a"],[t(I["a"],{staticClass:"ma-0 pa-0",attrs:{color:"primary","hide-details":""},model:{value:e.$root.showDeviceInfo,callback:function(t){e.$set(e.$root,"showDeviceInfo",t)},expression:"$root.showDeviceInfo"}})],1)],1),t(_["a"],[t(k["a"],[t(y["a"],[e._v(e._s(e.mdiIpNetworkOutline))])],1),t(w["a"],{staticStyle:{cursor:"pointer"},on:{click:function(t){e.$root.showSenderIP=!e.$root.showSenderIP}}},[t(w["c"],[e._v(e._s(e.$t("showSenderIP")))])],1),t($["a"],[t(I["a"],{staticClass:"ma-0 pa-0",attrs:{color:"primary","hide-details":""},model:{value:e.$root.showSenderIP,callback:function(t){e.$set(e.$root,"showSenderIP",t)},expression:"$root.showSenderIP"}})],1)],1),t(f["a"]),t(_["a"],{attrs:{link:"",href:"#/about"}},[t($["a"],[t(y["a"],[e._v(e._s(e.mdiInformation))])],1),t(w["a"],[t(w["c"],[e._v(e._s(e.$t("about")))])],1)],1)],1)],1),t(r["a"],{attrs:{app:"",color:"primary",dark:""}},[t(n["a"],{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),t(L["a"],{staticStyle:{cursor:"pointer"},on:{click:e.goHome}},[e._v(" "+e._s(e.$t("cloudClipboard"))),e.$root.room?t("span",{staticClass:"d-none d-sm-inline"},[e._v("（"+e._s(e.$t("room"))+"："),t("abbr",{staticStyle:{cursor:"pointer"},attrs:{title:e.$t("copyRoomName")},on:{click:function(t){return t.stopPropagation(),e.copyRoomName(e.$root.room)}}},[e._v(e._s(e.$root.room))]),e._v("）")]):e._e()]),t(P["a"]),e.$root.config&&e.$root.config.server&&e.$root.config.server.roomList?t(M["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:""},on:{click:function(t){e.roomSheet=!0,e.fetchRoomList()}}},o),[t(l["a"],{attrs:{content:e.availableRooms.length,value:e.availableRooms.length>0,color:"accent",overlap:""}},[t(y["a"],[e._v(e._s(e.mdiViewGrid))])],1)],1)]}}],null,!1,587308915)},[t("span",[e._v(e._s(e.$t("roomList"))+" ("+e._s(e.availableRooms.length)+")")])]):e._e(),t(M["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:""},on:{click:function(t){e.clearAllDialog=!0}}},o),[t(y["a"],[e._v(e._s(e.mdiNotificationClearAll))])],1)]}}])},[t("span",[e._v(e._s(e.$t("clearClipboard")))])]),t(M["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:""},on:{click:function(t){e.$root.roomInput=e.$root.room,e.$root.roomDialog=!0}}},o),[t(y["a"],[e._v(e._s(e.mdiBulletinBoard))])],1)]}}])},[t("span",[e._v(e._s(e.$t("enterRoom")))])]),t(M["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:""},on:{click:function(t){e.$root.websocket||e.$root.websocketConnecting||(e.$root.retry=0,e.$root.connect())}}},o),[e.$root.websocket?t(y["a"],[e._v(e._s(e.mdiLanConnect))]):e.$root.websocketConnecting?t(y["a"],[e._v(e._s(e.mdiLanPending))]):t(y["a"],[e._v(e._s(e.mdiLanDisconnect))])],1)]}}])},[e.$root.websocket?t("span",[e._v(e._s(e.$t("connected")))]):e.$root.websocketConnecting?t("span",[e._v(e._s(e.$t("connecting")))]):t("span",[e._v(e._s(e.$t("disconnected")))])])],1),t(s["a"],{staticClass:"ma-0 text-center",staticStyle:{position:"sticky",top:"64px","z-index":"5"},attrs:{type:"error",dismissible:"",dense:""},model:{value:e.clipboardClearedMessageVisible,callback:function(t){e.clipboardClearedMessageVisible=t},expression:"clipboardClearedMessageVisible"}},[e._v(" "+e._s(e.$t("clipboardClearedRefresh"))+" ")]),t(x["a"],[e.$route.meta.keepAlive?[t("keep-alive",[t("router-view")],1)]:t("router-view")],2),t(g["a"],{attrs:{"max-width":"300","hide-overlay":""},model:{value:e.colorDialog,callback:function(t){e.colorDialog=t},expression:"colorDialog"}},[t(m["a"],[t(u["c"],[e._v(e._s(e.$t("selectThemeColor")))]),t(u["b"],[e.$vuetify.theme.dark?t(v["a"],{attrs:{"show-swatches":"","hide-inputs":""},model:{value:e.$vuetify.theme.themes.dark.primary,callback:function(t){e.$set(e.$vuetify.theme.themes.dark,"primary",t)},expression:"$vuetify.theme.themes.dark.primary "}}):t(v["a"],{attrs:{"show-swatches":"","hide-inputs":""},model:{value:e.$vuetify.theme.themes.light.primary,callback:function(t){e.$set(e.$vuetify.theme.themes.light,"primary",t)},expression:"$vuetify.theme.themes.light.primary"}})],1),t(u["a"],[t(P["a"]),t(d["a"],{attrs:{color:"primary",text:""},on:{click:function(t){e.colorDialog=!1}}},[e._v(e._s(e.$t("ok")))])],1)],1)],1),t(g["a"],{attrs:{persistent:"","max-width":"360"},model:{value:e.$root.authCodeDialog,callback:function(t){e.$set(e.$root,"authCodeDialog",t)},expression:"$root.authCodeDialog"}},[t(m["a"],[t(u["c"],{staticClass:"headline"},[e._v(e._s(e.$t("authRequired")))]),t(u["b"],[t("p",[e._v(e._s(e.$t("authPrompt")))]),t(A["a"],{attrs:{label:e.$t("password"),autofocus:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$root.authCodeDialog=!1,e.$root.connect()}},model:{value:e.$root.authCode,callback:function(t){e.$set(e.$root,"authCode",t)},expression:"$root.authCode"}})],1),t(u["a"],[t(P["a"]),t(d["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.$root.authCodeDialog=!1,e.$root.connect()}}},[e._v(e._s(e.$t("submit")))])],1)],1)],1),t(g["a"],{attrs:{persistent:"","max-width":"360"},model:{value:e.$root.roomDialog,callback:function(t){e.$set(e.$root,"roomDialog",t)},expression:"$root.roomDialog"}},[t(m["a"],[t(u["c"],{staticClass:"headline"},[e._v(e._s(e.$t("clipboardRoom")))]),t(u["b"],[t("p",[e._v(e._s(e.$t("roomPrompt1")))]),t("p",[e._v(e._s(e.$t("roomPrompt2")))]),t(A["a"],{attrs:{label:e.$t("roomName"),"append-icon":e.mdiDiceMultiple,autofocus:""},on:{"click:append":function(t){e.$root.roomInput=["reimu","marisa","rumia","cirno","meiling","patchouli","sakuya","remilia","flandre","letty","chen","lyrica","lunasa","merlin","youmu","yuyuko","ran","yukari","suika","mystia","keine","tewi","reisen","eirin","kaguya","mokou"][Math.floor(26*Math.random())]+"-"+Math.random().toString(16).substring(2,6)},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$router.push({path:"/",query:{room:e.$root.roomInput}}),e.$root.roomDialog=!1}},model:{value:e.$root.roomInput,callback:function(t){e.$set(e.$root,"roomInput",t)},expression:"$root.roomInput"}})],1),t(u["a"],[t(P["a"]),t(d["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.$root.roomDialog=!1}}},[e._v(e._s(e.$t("cancel")))]),t(d["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.$router.push({path:"/",query:{room:e.$root.roomInput}}),e.$root.roomDialog=!1}}},[e._v(e._s(e.$t("enterRoom")))])],1)],1)],1),t(g["a"],{attrs:{"max-width":"360"},model:{value:e.clearAllDialog,callback:function(t){e.clearAllDialog=t},expression:"clearAllDialog"}},[t(m["a"],[t(u["c"],{staticClass:"headline"},[e._v(e._s(e.$t("clearClipboardConfirmTitle")))]),t(u["b"],[t("p",[e._v(e._s(e.$t("clearClipboardConfirmText")))])]),t(u["a"],[t(P["a"]),t(d["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.clearAllDialog=!1}}},[e._v(e._s(e.$t("cancel")))]),t(d["a"],{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.clearAllDialog=!1,e.clearAll(),e.clipboardClearedMessageVisible=!0}}},[e._v(e._s(e.$t("ok")))])],1)],1)],1),t(c["a"],{attrs:{scrollable:"","max-width":"800"},model:{value:e.roomSheet,callback:function(t){e.roomSheet=t},expression:"roomSheet"}},[t(m["a"],[t(u["c"],{staticClass:"d-flex align-center"},[t(y["a"],{attrs:{left:""}},[e._v(e._s(e.mdiViewGrid))]),e._v(" "+e._s(e.$t("roomList"))+" "),t(p["a"],{staticClass:"ml-2",attrs:{small:"",outlined:""}},[e._v(e._s(e.availableRooms.length)+" "+e._s(e.$t("rooms")))]),t(P["a"]),t(d["a"],{attrs:{icon:""},on:{click:function(t){e.roomSheet=!1}}},[t(y["a"],[e._v(e._s(e.mdiClose))])],1)],1),t(f["a"]),t(u["b"],{staticStyle:{"max-height":"60vh"}},[t(A["a"],{staticClass:"mb-4",attrs:{placeholder:e.$t("searchRooms"),"prepend-inner-icon":e.mdiMagnify,outlined:"",dense:"",clearable:""},model:{value:e.roomSearch,callback:function(t){e.roomSearch=t},expression:"roomSearch"}}),e.roomsLoading?t("div",{staticClass:"text-center py-4"},[t(F["a"],{attrs:{indeterminate:"",color:"primary"}}),t("div",{staticClass:"mt-2"},[e._v(e._s(e.$t("loadingRooms")))])],1):0===e.filteredRooms.length?t("div",{staticClass:"text-center py-8"},[t(y["a"],{attrs:{size:"64",color:"grey lighten-1"}},[e._v(e._s(e.mdiHomeOutline))]),t("div",{staticClass:"mt-2 grey--text"},[e._v(e._s(e.$t("noRoomsFound")))])],1):t(T["a"],e._l(e.filteredRooms,(function(o){return t(h["a"],{key:o.name,attrs:{cols:"12",sm:"6",md:"4"}},[t(m["a"],{staticStyle:{cursor:"pointer",transition:"all 0.3s ease"},attrs:{outlined:"",hover:"",color:e.$root.room===o.name?"primary":"",dark:e.$root.room===o.name,elevation:e.$root.room===o.name?4:0},on:{click:function(t){return e.switchRoom(o.name)}}},[t(u["b"],[t("div",{staticClass:"d-flex justify-space-between align-center mb-3"},[t(y["a"],{attrs:{color:e.$root.room===o.name?"white":"primary"}},[e._v(" "+e._s(""===o.name?e.mdiHomeOutline:e.mdiHome)+" ")]),t(p["a"],{attrs:{"x-small":"",color:o.isActive?"success":"grey","text-color":o.isActive?"white":"grey darken-2"}},[e._v(" "+e._s(o.isActive?e.$t("active"):e.$t("inactive"))+" ")])],1),t("div",{staticClass:"subtitle-1 font-weight-bold mb-2",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(o.name||e.$t("publicRoom"))+" ")]),t("div",{staticClass:"caption mb-3",class:e.$root.room===o.name?"white--text":"grey--text"},[e._v(" "+e._s(e.$t("messages"))+": "+e._s(o.messageCount)),t("br"),e._v(" "+e._s(e.$t("lastActive"))+": "+e._s(e.formatTime(o.lastActive))+" ")]),t("div",{staticClass:"d-flex justify-space-between align-center"},[t(p["a"],{attrs:{"x-small":"",outlined:e.$root.room!==o.name,color:e.$root.room===o.name?"white":"primary","text-color":e.$root.room===o.name?"primary":"white"}},[e._v(" "+e._s(o.deviceCount)+" "+e._s(e.$t("devices"))+" ")]),t(d["a"],{attrs:{"x-small":"",icon:"",color:e.$root.room===o.name?"white":"grey"},on:{click:function(t){return t.stopPropagation(),e.toggleFavoriteRoom(o.name)}}},[t(y["a"],{attrs:{small:""}},[e._v(" "+e._s(o.isFavorite?e.mdiHeart:e.mdiHeartOutline)+" ")])],1)],1)])],1)],1)})),1)],1)],1)],1)],1)}),O=[],N=(o("f665"),o("ab43"),o("94ed")),V={data(){return{drawer:!1,colorDialog:!1,clearAllDialog:!1,clipboardClearedMessageVisible:!1,roomSheet:!1,roomSearch:"",availableRooms:[],roomsLoading:!1,mdiContentPaste:N["l"],mdiDevices:N["n"],mdiInformation:N["x"],mdiLanConnect:N["z"],mdiLanDisconnect:N["A"],mdiLanPending:N["B"],mdiBrightness4:N["d"],mdiBulletinBoard:N["e"],mdiDiceMultiple:N["o"],mdiPalette:N["L"],mdiNotificationClearAll:N["K"],mdiTranslate:N["R"],mdiClockOutline:N["i"],mdiIpNetworkOutline:N["y"],mdiViewGrid:N["S"],mdiClose:N["j"],mdiMagnify:N["F"],mdiHome:N["u"],mdiHomeOutline:N["v"],mdiHeart:N["s"],mdiHeartOutline:N["t"],navigator:navigator}},computed:{currentLanguageName(){switch(this.$i18n.locale){case"zh":return"简体中文";case"zh-TW":return"繁體中文";case"ja":return"日本語";case"en":default:return"English"}},filteredRooms(){let e=this.availableRooms;return this.roomSearch&&(e=e.filter(e=>(e.name||this.$t("publicRoom")).toLowerCase().includes(this.roomSearch.toLowerCase()))),e.sort((e,t)=>e.isFavorite!==t.isFavorite?t.isFavorite-e.isFavorite:0)}},methods:{async clearAll(){try{this.$root.received.filter(e=>"file"===e.type);await this.$http.delete("revoke/all",{params:{room:this.$root.room}})}catch(e){console.log(e),this.clipboardClearedMessageVisible=!1,e.response&&e.response.data.msg?this.$toast(this.$t("clearClipboardFailedMsg",{msg:e.response.data.msg})):this.$toast(this.$t("clearClipboardFailed"))}},copyRoomName(e){if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(e).then(()=>this.$toast(this.$t("copiedRoomName",{room:e}))).catch(e=>this.$toast(this.$t("copyFailed",{err:e})));else try{const t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$toast(this.$t("copiedRoomName",{room:e}))}catch(t){this.$toast(this.$t("copyFailed",{err:t}))}},changeLocale(e){this.$i18n.locale!==e&&(this.$i18n.locale=e,localStorage.setItem("locale",e))},goHome(){console.log("goHome triggered. Current route:",this.$route.fullPath),"/"!==this.$route.path||Object.keys(this.$route.query).length>0?(console.log("Navigating to / (Public Room)"),this.$router.push("/")):console.log("Already on public room (/), not navigating.")},async fetchRoomList(){if(this.$root.config&&this.$root.config.server&&this.$root.config.server.roomList)if(this.roomsLoading)console.log("房间列表正在加载中，跳过重复请求");else{this.roomsLoading=!0,console.log("获取房间列表");try{const e=await this.$http.get("rooms"),t=this.getFavoriteRooms();this.availableRooms=e.data.rooms.map(e=>({...e,isFavorite:t.includes(e.name)})),console.log(`房间列表更新成功，共 ${this.availableRooms.length} 个房间`)}catch(e){console.error("Failed to fetch room list:",e),this.$toast(this.$t("failedToLoadRooms"))}finally{this.roomsLoading=!1}}else console.log("房间列表功能未启用或配置未完成加载")},switchRoom(e){this.roomSheet=!1,""===e?this.$router.push("/"):this.$router.push({path:"/",query:{room:e}})},getFavoriteRooms(){try{return JSON.parse(localStorage.getItem("favoriteRooms")||"[]")}catch{return[]}},toggleFavoriteRoom(e){const t=this.getFavoriteRooms(),o=t.indexOf(e);o>-1?(t.splice(o,1),this.$toast(this.$t("removedFromFavorites",{room:e||this.$t("publicRoom")}))):(t.push(e),this.$toast(this.$t("addedToFavorites",{room:e||this.$t("publicRoom")}))),localStorage.setItem("favoriteRooms",JSON.stringify(t));const i=this.availableRooms.find(t=>t.name===e);i&&(i.isFavorite=!i.isFavorite)},formatTime(e){if(!e||0===e)return this.$t("never");const t=Math.floor(Date.now()/1e3),o=e,i=t-o;return i<0||i<60?this.$t("justNow"):i<3600?this.$t("minutesAgo",{minutes:Math.floor(i/60)}):i<86400?this.$t("hoursAgo",{hours:Math.floor(i/3600)}):this.$t("daysAgo",{days:Math.floor(i/86400)})}},mounted(){const e=localStorage.getItem("darkPrimary"),t=localStorage.getItem("lightPrimary");e&&(this.$vuetify.theme.themes.dark.primary=e),t&&(this.$vuetify.theme.themes.light.primary=t),this.$watch("$vuetify.theme.themes.dark.primary",e=>{localStorage.setItem("darkPrimary",e)}),this.$watch("$vuetify.theme.themes.light.primary",e=>{localStorage.setItem("lightPrimary",e)}),console.log("App.vue mounted - 房间列表将在用户点击时获取")},watch:{$route(){this.clipboardClearedMessageVisible=!1}}},j=V,E=(o("5197"),o("2877")),B=Object(E["a"])(j,z,O,!1,null,"21cd22c7",null),U=B.exports,q=o("8c4f"),H=o("a523"),Q=o("0789"),W=o("c73b"),J=o("71d9"),G=function(){var e=this,t=e._self._c;return t(H["a"],[t(T["a"],[t(h["a"],{staticClass:"hidden-sm-and-down",attrs:{cols:"12",md:"4"}},[t("send-text",{ref:"sendTextDesktop"}),e._v(" "),t(f["a"],{staticClass:"my-4"}),t("send-file",{ref:"sendFileDesktop"}),e._v(" "),t(f["a"],{staticClass:"my-4"}),e._v(" "),t(m["a"],{staticClass:"mt-4 pa-4 text-center",attrs:{outlined:""}},[t(R["a"],{staticClass:"justify-center"},[e._v(e._s(e.$t("scanToAccessPage")))]),t("qrcode-vue",{attrs:{value:e.currentPageUrl,size:150,level:"H"}}),t("div",{staticClass:"text-caption mt-2",staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.currentPageUrl))])],1)],1),t(h["a"],{attrs:{cols:"12",md:"8"}},[t(Q["d"],{attrs:{group:""}},e._l(e.$root.received,(function(e){return t("text"===e.type?"received-text":"received-file",{key:e.id,tag:"component",attrs:{meta:e}})})),1),t("div",{staticClass:"text-center caption text--secondary py-2"},[e._v(e._s(e.$root.received.length?e.$t("alreadyAtBottom"):e.$t("emptyHere")))])],1)],1),t(W["a"],{staticClass:"hidden-md-and-up",staticStyle:{transform:"translateY(-64px)"},attrs:{bottom:"",right:"",fixed:"",direction:"top",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(){return[t(d["a"],{attrs:{fab:"",dark:"",color:"primary"},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?t(y["a"],[e._v(e._s(e.mdiClose))]):t(y["a"],[e._v(e._s(e.mdiPlus))])],1)]},proxy:!0}]),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[t(M["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{fab:"",dark:"",small:"",color:"indigo"},on:{click:function(t){e.pageQrDialogVisible=!0}}},o),[t(y["a"],[e._v(e._s(e.mdiQrcode))])],1)]}}])},[t("span",[e._v(e._s(e.$t("showQrCode")))])]),t(M["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{fab:"",dark:"",small:"",color:"green"},on:{click:function(t){return e.openDialog("file")}}},o),[t(y["a"],[e._v(e._s(e.mdiFileDocumentOutline))])],1)]}}])},[t("span",[e._v(e._s(e.$t("sendFile")))])]),t(M["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{fab:"",dark:"",small:"",color:"red"},on:{click:function(t){return e.openDialog("text")}}},o),[t(y["a"],[e._v(e._s(e.mdiText))])],1)]}}])},[t("span",[e._v(e._s(e.$t("sendText")))])])],1),t(g["a"],{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(m["a"],[t(J["a"],{staticClass:"flex-grow-0",attrs:{dark:"",color:"primary"}},[t(d["a"],{attrs:{icon:""},on:{click:e.closeDialog}},[t(y["a"],[e._v(e._s(e.mdiClose))])],1),"text"===e.mode?t(L["a"],[e._v(e._s(e.$t("sendText")))]):e._e(),"file"===e.mode?t(L["a"],[e._v(e._s(e.$t("sendFile")))]):e._e(),t(P["a"]),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:""},on:{click:e.reconnect}},o),[e.$root.websocket?t(y["a"],[e._v(e._s(e.mdiLanConnect))]):e.$root.websocketConnecting?t(y["a"],[e._v(e._s(e.mdiLanPending))]):t(y["a"],[e._v(e._s(e.mdiLanDisconnect))])],1)]}}])},[e.$root.websocket?t("span",[e._v(e._s(e.$t("connected")))]):e.$root.websocketConnecting?t("span",[e._v(e._s(e.$t("connecting")))]):t("span",[e._v(e._s(e.$t("disconnected")))])])],1),t(u["b"],{staticClass:"px-4"},[t("div",{staticClass:"my-4"},["text"===e.mode?t("send-text",{ref:"sendTextDialog"}):e._e(),e._v(" "),"file"===e.mode?t("send-file",{ref:"sendFileDialog"}):e._e()],1)])],1)],1),t(g["a"],{attrs:{"max-width":"250"},model:{value:e.pageQrDialogVisible,callback:function(t){e.pageQrDialogVisible=t},expression:"pageQrDialogVisible"}},[t(m["a"],[t(u["c"],{staticClass:"headline justify-center"},[e._v(e._s(e.$t("scanToAccessPage")))]),t(u["b"],{staticClass:"text-center pa-4"},[t("qrcode-vue",{attrs:{value:e.currentPageUrl,size:200,level:"H"}}),t("div",{staticClass:"text-caption mt-2",staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.currentPageUrl))])],1),t(u["a"],[t(P["a"]),t(d["a"],{attrs:{color:"primary",text:""},on:{click:function(t){e.pageQrDialogVisible=!1}}},[e._v(e._s(e.$t("close")))])],1)],1)],1)],1)},K=[],Y=o("d7b0"),X=o("a844"),Z=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"headline text--primary mb-4"},[e._v(e._s(e.$t("sendText")))]),t(X["a"],{ref:"textarea",attrs:{"no-resize":"",outlined:"",dense:"",rows:"6",counter:e.$root.config.text.limit,placeholder:e.$t("enterTextToSend")},model:{value:e.$root.send.text,callback:function(t){e.$set(e.$root.send,"text",t)},expression:"$root.send.text"}}),t("div",{staticClass:"text-right"},[t(d["a"],{attrs:{color:"primary",block:e.$vuetify.breakpoint.smAndDown,disabled:!e.$root.send.text||!e.$root.websocket||e.$root.send.text.length>e.$root.config.text.limit},on:{click:e.send}},[e._v(e._s(e.$t("send")))])],1)],1)},ee=[],te=(o("88a7"),o("271a"),o("5494"),{name:"send-text",methods:{focus(){this.$refs.textarea.focus()},send(){this.$http.post("text",this.$root.send.text,{params:new URLSearchParams([["room",this.$root.room]]),headers:{"Content-Type":"text/plain"}}).then(e=>{this.$toast(this.$t("sendSuccess")),this.$root.send.text=""}).catch(e=>{e.response&&e.response.data.msg?this.$toast(this.$t("sendFailedMsg",{msg:e.response.data.msg})):this.$toast(this.$t("sendFailed"))})}}}),oe=te,ie=Object(E["a"])(oe,Z,ee,!1,null,null,null),se=ie.exports,ae=o("adda"),re=o("8e36"),ne=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"headline text--primary mb-4"},[e._v(e._s(e.$t("sendFile")))]),t(m["a"],{staticClass:"pa-3 mb-6 d-flex flex-row align-center",attrs:{outlined:""},on:{dragenter:function(e){return e.preventDefault()},dragover:function(e){return e.preventDefault()},dragleave:function(e){return e.preventDefault()},drop:function(t){t.preventDefault(),e.handleSelectFiles(Array.from(t.dataTransfer.files))}}},[e.$root.send.files.length?[e.progress?[t("div",{staticClass:"flex-grow-1"},[t("small",{staticClass:"d-block text-right text--secondary"},[e._v(" "+e._s(e._f("prettyFileSize")(Math.min(e.uploadedSize,e.fileSize)))+" / "+e._s(e._f("prettyFileSize")(e.fileSize))+" ("+e._s(e._f("percentage")(e.uploadProgress))+") ")]),t(re["a"],{attrs:{value:100*e.uploadProgress}})],1)]:[e.isUploadingImage?t(ae["a"],{staticClass:"mr-3 flex-grow-0",staticStyle:{"border-radius":"3px"},attrs:{src:e.imagePreview,width:"2.5rem",height:"2.5rem"}}):e._e(),t("div",{staticClass:"flex-grow-1 mr-2",staticStyle:{"min-width":"0"}},[t("div",{staticClass:"text-truncate",attrs:{title:e.$root.send.files[0].name+" "+(e.$root.send.files.length>1?`等 ${e.$root.send.files.length} 个文件`:"")}},[e._v(e._s(e.$root.send.files[0].name)+" "+e._s(e.$root.send.files.length>1?`等 ${e.$root.send.files.length} 个文件`:"")+" ")]),t("div",{staticClass:"caption"},[e._v(e._s(e._f("prettyFileSize")(e.fileSize)))])]),t("div",{staticClass:"align-self-center"},[t(d["a"],{attrs:{icon:"",color:"grey"},on:{click:function(t){return e.$root.send.files.splice(0)}}},[t(y["a"],[e._v(e._s(e.mdiClose))])],1)],1)]]:[t(d["a"],{staticClass:"d-block mx-auto",attrs:{text:"",color:"primary",large:""},on:{click:e.focus}},[t("div",{attrs:{title:e.$t("dragDropPasteTip")}},[e._v(" "+e._s(e.$t("selectFileToSend"))),t("span",{staticClass:"d-none d-xl-inline"},[e._v(e._s(e.$t("dragDropPasteTip")))]),t("br"),t("small",{staticClass:"text--secondary"},[e._v(e._s(e.$t("fileSizeLimit",{limit:e.prettyFileSize(e.$root.config.file.limit)})))])])]),t("input",{ref:"selectFile",staticClass:"d-none",attrs:{type:"file",multiple:""},on:{change:function(t){e.handleSelectFiles(Array.from(t.target.files))}}})]],2),t("div",{staticClass:"text-right"},[t(d["a"],{attrs:{color:"primary",block:e.$vuetify.breakpoint.smAndDown,disabled:!e.$root.send.files.length||!e.$root.websocket||e.progress},on:{click:e.send}},[e._v(e._s(e.$t("send")))])],1)],1)},le=[];o("13d5"),o("d866"),o("9485"),o("a732");function ce(e){let t=["TB","GB","MB","KB"],o="Bytes";while(e>=1024&&t.length)e/=1024,o=t.pop();return`${Math.floor(100*e)/100} ${o}`}function de(e,t=2){return(100*e).toFixed(t)+"%"}function me(e){if(!e)return"";let t=new Date(1e3*e);return t.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}var ue={name:"send-file",data(){return{progress:!1,uploadedSizes:[],imagePreview:"",uploading:!1,mdiClose:N["j"]}},computed:{fileSize(){return this.$root.send.files.length?this.$root.send.files.reduce((e,t)=>e+t.size,0):0},uploadedSize(){return this.uploadedSizes.length?this.uploadedSizes.reduce((e,t)=>e+t,0):0},uploadProgress(){return Math.min(0!==this.fileSize?this.uploadedSize/this.fileSize:0,1)},isUploadingImage(){return this.$root.send.files.length&&this.$root.send.files[0].type.startsWith("image/")}},methods:{prettyFileSize:ce,focus(){this.$refs.selectFile.click()},handleSelectFiles(e){e.some(e=>!e.size)?this.$toast(this.$t("cannotSendEmptyFile")):e.some(e=>e.size>this.$root.config.file.limit)?this.$toast(this.$t("fileSizeExceeded",{limit:ce(this.$root.config.file.limit)})):(this.$root.send.files.splice(0),this.$root.send.files.push(...e),this.isUploadingImage&&(URL.revokeObjectURL(this.imagePreview),this.imagePreview=URL.createObjectURL(e[0])))},async send(){try{const e=this.$root.config.file.chunk;this.uploadedSizes.splice(0),this.uploadedSizes.push(...Array(this.$root.send.files.length).fill(0)),await Promise.all(this.$root.send.files.map(async(t,o)=>{if(t.size<e){const e=new FormData;e.set("file",t),this.progress=!0,await this.$http.postForm("upload",e,{params:new URLSearchParams([["room",this.$root.room]]),onUploadProgress:e=>this.$set(this.uploadedSizes,o,e.loaded)})}else{const i=await this.$http.post("upload/chunk",t.name,{headers:{"Content-Type":"text/plain"}}),s=i.data.result.uuid;let a=0;this.progress=!0;while(a<t.size){const i=t.slice(a,a+e);await this.$http.post("upload/chunk/"+s,i,{headers:{"Content-Type":"application/octet-stream"},onUploadProgress:e=>this.$set(this.uploadedSizes,o,a+e.loaded)}),a+=e}await this.$http.post("upload/finish/"+s,null,{params:new URLSearchParams([["room",this.$root.room]])})}})),this.$toast(this.$t("sendSuccess")),this.$root.send.files.splice(0)}catch(e){e.response&&e.response.data.msg?this.$toast(this.$t("sendFailedMsg",{msg:e.response.data.msg})):this.$toast(this.$t("sendFailed"))}finally{this.progress=!1}}},mounted(){document.onpaste=e=>{if(!e||!e.clipboardData)return;console.log(e.clipboardData);const t=Array.from(e.clipboardData.items);t.length&&t.every(e=>"file"===e.kind)&&this.handleSelectFiles(t.map(e=>e.getAsFile()))}}},pe=ue,he=Object(E["a"])(pe,ne,le,!1,null,null,null),ve=he.exports,ge=o("ce87"),fe=function(){var e=this,t=e._self._c;return t(ge["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:o}){var i;return[t(m["a"],{staticClass:"mb-2 transition-swing",attrs:{elevation:o?6:2}},[t(u["b"],[t("div",{staticClass:"d-flex flex-row align-center"},[t("div",{staticClass:"flex-grow-1 mr-2",staticStyle:{"min-width":"0"}},[e.meta.timestamp&&(e.$root.showTimestamp||e.$root.showDeviceInfo||e.$root.showSenderIP)?t("div",{staticClass:"caption text--secondary mb-1"},[e.$root.showTimestamp?[t(y["a"],{staticClass:"mr-1",attrs:{small:""}},[e._v(e._s(e.mdiClockOutline))]),e._v(e._s(e.formatTimestamp(e.meta.timestamp))+" ")]:e._e(),e.$root.showDeviceInfo&&null!=(i=e.meta.senderDevice)&&i.type?[t(y["a"],{staticClass:"ml-2 mr-1",attrs:{small:""}},[e._v(e._s(e.deviceIcon(e.meta.senderDevice.type)))]),e._v(e._s(e.meta.senderDevice.os||e.meta.senderDevice.type)+" ")]:e._e(),e.$root.showSenderIP&&e.meta.senderIP?[t(y["a"],{staticClass:"ml-2 mr-1",attrs:{small:""}},[e._v(e._s(e.mdiIpNetworkOutline))]),e._v(e._s(e.meta.senderIP)+" ")]:e._e()],2):e._e(),t("div",{staticClass:"title text-truncate text--primary",on:{click:function(t){e.expand=!e.expand}}},[e._v(" "+e._s(e.$t("textMessage"))),t(y["a"],[e._v(e._s(e.expand?e.mdiChevronUp:e.mdiChevronDown))])],1),t("div",{staticClass:"text-truncate",on:{click:function(t){e.expand=!e.expand}}},[e._v(e._s(e.decodedContentPreview))])]),t("div",{staticClass:"align-self-start text-no-wrap d-flex flex-column align-end"},[e.meta.id?t("div",{staticClass:"caption grey--text text--darken-1 mb-1"},[t(y["a"],{staticClass:"mr-1",attrs:{small:""}},[e._v(e._s(e.mdiPound))]),e._v(e._s(e.meta.id)+" ")],1):e._e(),t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey"},on:{click:e.copyText}},o),[t(y["a"],[e._v(e._s(e.mdiContentCopy))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("copyText")))])]),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey"},on:{click:e.copyLink}},o),[t(y["a"],[e._v(e._s(e.mdiLinkVariant))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("copyLink")))])]),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey"},on:{click:function(t){e.qrDialogVisible=!0}}},o),[t(y["a"],[e._v(e._s(e.mdiQrcode))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("showQrCode")))])]),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey"},on:{click:e.deleteItem}},o),[t(y["a"],[e._v(e._s(e.mdiClose))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("delete")))])])],1)])]),t(Q["a"],[t("div",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}]},[t(f["a"],{staticClass:"my-2"}),t("div",{ref:"content",staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[e._v(e._s(e.decodedContent))])],1)])],1),t(g["a"],{attrs:{"max-width":"250"},model:{value:e.qrDialogVisible,callback:function(t){e.qrDialogVisible=t},expression:"qrDialogVisible"}},[t(m["a"],[t(u["c"],{staticClass:"headline justify-center"},[e._v(e._s(e.$t("scanToAccess")))]),t(u["b"],{staticClass:"text-center pa-4"},[t("qrcode-vue",{attrs:{value:e.contentUrl,size:200,level:"H"}}),t("div",{staticClass:"text-caption mt-2",staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.contentUrl))])],1),t(u["a"],[t(P["a"]),t(d["a"],{attrs:{color:"primary",text:""},on:{click:function(t){e.qrDialogVisible=!1}}},[e._v(e._s(e.$t("close")))])],1)],1)],1)],1)]}}])})},ye=[];function be(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}var _e={name:"received-text",components:{QrcodeVue:Y["a"]},props:{meta:{type:Object,default(){return{}}}},data(){return{expand:!1,qrDialogVisible:!1,mdiChevronUp:N["h"],mdiChevronDown:N["g"],mdiContentCopy:N["k"],mdiClose:N["j"],mdiLinkVariant:N["D"],mdiClockOutline:N["i"],mdiDesktopTower:N["m"],mdiCellphone:N["f"],mdiIpNetworkOutline:N["y"],mdiQrcode:N["O"],mdiPound:N["N"]}},computed:{decodedContent(){return be(this.meta.content||"")},decodedContentPreview(){const e=be(this.meta.content||"");return e},contentUrl(){var e,t,o;const i=window.location.protocol,s=window.location.host,a=(null==(e=this.$root.config)||null==(e=e.server)?void 0:e.prefix)||"",r=this.$root.room?"?room="+this.$root.room:"",n=null!=(t=null==(o=this.meta)?void 0:o.id)?t:"";return`${i}//${s}${a}/content/${n}${r}`}},methods:{formatTimestamp:me,deviceIcon(e){const t=e.toLowerCase();return t.includes("mobile")||t.includes("phone")||t.includes("tablet")||t.includes("ios")||t.includes("android")?N["f"]:N["m"]},copyToClipboard(e,t="copySuccess",o="copyFailedGeneral"){if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(e).then(()=>this.$toast(this.$t(t))).catch(e=>{console.error("使用 navigator.clipboard 复制失败:",e),this.$toast(this.$t(o))});else try{const i=document.createElement("textarea");i.value=e,i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select();const s=document.execCommand("copy");document.body.removeChild(i),s?this.$toast(this.$t(t)):(console.error("使用 document.execCommand 复制失败"),this.$toast(this.$t(o)))}catch(i){console.error("复制时发生错误:",i),this.$toast(this.$t(o))}},copyText(){this.copyToClipboard(this.decodedContent,"copySuccess")},copyLink(){this.copyToClipboard(this.contentUrl,"copySuccess")},deleteItem(){this.$http.delete("revoke/"+this.meta.id,{params:new URLSearchParams([["room",this.$root.room]])}).then(()=>{this.$toast(this.$t("deleteSuccessText"))}).catch(e=>{e.response&&e.response.data.msg?this.$toast(this.$t("deleteFailedMessageMsg",{msg:e.response.data.msg})):this.$toast(this.$t("deleteFailedMessage"))})}}},$e=_e,we=Object(E["a"])($e,fe,ye,!1,null,null,null),Ce=we.exports,ke=function(){var e=this,t=e._self._c;return t(ge["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:o}){return[t(m["a"],{staticClass:"mb-2 transition-swing",attrs:{elevation:o?6:2}},[t(u["b"],[e.meta.timestamp&&(e.$root.showTimestamp||e.$root.showDeviceInfo||e.$root.showSenderIP)?t("div",{staticClass:"caption text--secondary mb-1"},[e.$root.showTimestamp?[t(y["a"],{staticClass:"mr-1",attrs:{small:""}},[e._v(e._s(e.mdiClockOutline))]),e._v(e._s(e.formatTimestamp(e.meta.timestamp))+" ")]:e._e(),e.$root.showDeviceInfo&&e.meta.senderDevice&&e.meta.senderDevice.type?[t(y["a"],{staticClass:"ml-2 mr-1",attrs:{small:""}},[e._v(e._s(e.deviceIcon(e.meta.senderDevice.type)))]),e._v(e._s(e.meta.senderDevice.os||e.meta.senderDevice.type)+" ")]:e._e(),e.$root.showSenderIP&&e.meta.senderIP?[t(y["a"],{staticClass:"ml-2 mr-1",attrs:{small:""}},[e._v(e._s(e.mdiIpNetworkOutline))]),e._v(e._s(e.meta.senderIP)+" ")]:e._e()],2):e._e(),t("div",{staticClass:"d-flex flex-row align-center"},[!e.meta.thumbnail||e.isPreviewableVideo||e.isPreviewableAudio?e.isPreviewableAudio?t(y["a"],{staticClass:"mr-3 flex-grow-0 hidden-sm-and-down",attrs:{size:"2.5rem",color:"grey"}},[e._v(e._s(e.mdiMusicNote))]):e.isPreviewableVideo?t(y["a"],{staticClass:"mr-3 flex-grow-0 hidden-sm-and-down",attrs:{size:"2.5rem",color:"grey"}},[e._v(e._s(e.mdiMovie))]):e._e():t(ae["a"],{staticClass:"mr-3 flex-grow-0 hidden-sm-and-down",staticStyle:{"border-radius":"3px"},attrs:{src:e.meta.thumbnail,width:"2.5rem",height:"2.5rem"}}),t("div",{staticClass:"flex-grow-1 mr-2",staticStyle:{"min-width":"0"}},[t("div",{staticClass:"title text-truncate text--primary",style:{"text-decoration":e.expired?"line-through":""},attrs:{title:e.meta.name}},[e._v(e._s(e.meta.name))]),t("div",{staticClass:"caption"},[e._v(" "+e._s(e._f("prettyFileSize")(e.meta.size))+" "),e.$vuetify.breakpoint.smAndDown?[t("br")]:[e._v("|")],e._v(" "+e._s(e.expired?e.$t("expiredAt",{time:e.formatTimestamp(e.meta.expire)}):e.$t("willExpireAt",{time:e.formatTimestamp(e.meta.expire)}))+" ")],2)]),t("div",{staticClass:"align-self-start text-no-wrap d-flex flex-column align-end"},[e.meta.id?t("div",{staticClass:"caption grey--text text--darken-1 mb-1"},[t(y["a"],{staticClass:"mr-1",attrs:{small:""}},[e._v(e._s(e.mdiPound))]),e._v(e._s(e.meta.id)+" ")],1):e._e(),t("div",{staticClass:"align-self-center text-no-wrap"},[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey",href:e.expired?null:e.fileUrl,download:e.expired?null:e.meta.name,disabled:e.expired}},o),[t(y["a"],[e._v(e._s(e.expired?e.mdiDownloadOff:e.mdiDownload))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.expired?e.$t("expired"):e.$t("download")))])]),e.meta.thumbnail||e.isPreviewableVideo||e.isPreviewableAudio?[e.loadingPreview?t(F["a"],{attrs:{indeterminate:"",color:"grey"}},[e._v(e._s(e._f("percentage")(e.loadedPreview/e.meta.size,0)))]):e._e(),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey"},on:{click:function(t){!e.expired&&e.previewFile()}}},o),[t(y["a"],[e._v(e._s(e.isPreviewableVideo||e.isPreviewableAudio?e.mdiMovieSearchOutline:e.mdiImageSearchOutline))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("preview")))])])]:e._e(),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey"},on:{click:e.copyLink}},o),[t(y["a"],[e._v(e._s(e.mdiLinkVariant))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("copyLink")))])]),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey"},on:{click:function(t){e.qrDialogVisible=!0}}},o),[t(y["a"],[e._v(e._s(e.mdiQrcode))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("showQrCode")))])]),t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(d["a"],e._g({attrs:{icon:"",color:"grey",disabled:e.loadingPreview},on:{click:e.deleteItem}},o),[t(y["a"],[e._v(e._s(e.mdiClose))])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.$t("delete")))])])],2)])],1),e.meta.thumbnail||e.isPreviewableVideo||e.isPreviewableAudio?t(Q["a"],[t("div",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}]},[t(f["a"],{staticClass:"my-2"}),e.isPreviewableVideo?t("video",{staticClass:"rounded d-block mx-auto",staticStyle:{"max-height":"480px","max-width":"100%"},attrs:{src:e.srcPreview,controls:"",preload:"metadata"}}):e.isPreviewableAudio?t("audio",{staticClass:"rounded d-block mx-auto",staticStyle:{width:"100%"},attrs:{src:e.srcPreview,controls:"",preload:"metadata"}}):t("img",{staticClass:"rounded d-block mx-auto",staticStyle:{"max-height":"480px","max-width":"100%"},attrs:{src:e.srcPreview}})],1)]):e._e()],1),t(g["a"],{attrs:{"max-width":"250"},model:{value:e.qrDialogVisible,callback:function(t){e.qrDialogVisible=t},expression:"qrDialogVisible"}},[t(m["a"],[t(u["c"],{staticClass:"headline justify-center"},[e._v(e._s(e.$t("scanToAccess")))]),t(u["b"],{staticClass:"text-center pa-4"},[t("qrcode-vue",{attrs:{value:e.contentUrl,size:200,level:"H"}}),t("div",{staticClass:"text-caption mt-2",staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.contentUrl))])],1),t(u["a"],[t(P["a"]),t(d["a"],{attrs:{color:"primary",text:""},on:{click:function(t){e.qrDialogVisible=!1}}},[e._v(e._s(e.$t("close")))])],1)],1)],1)],1)]}}])})},xe=[],Se={name:"received-file",components:{QrcodeVue:Y["a"]},props:{meta:{type:Object,default(){return{}}}},data(){return{loadingPreview:!1,loadedPreview:0,expand:!1,srcPreview:null,qrDialogVisible:!1,mdiContentCopy:N["k"],mdiDownload:N["p"],mdiDownloadOff:N["q"],mdiClose:N["j"],mdiImageSearchOutline:N["w"],mdiLinkVariant:N["D"],mdiMovieSearchOutline:N["I"],mdiClockOutline:N["i"],mdiDesktopTower:N["m"],mdiCellphone:N["f"],mdiIpNetworkOutline:N["y"],mdiQrcode:N["O"],mdiMusicNote:N["J"],mdiMovie:N["H"],mdiPound:N["N"]}},computed:{expired(){return this.$root.date.getTime()/1e3>this.meta.expire},isPreviewableVideo(){return this.meta.name.match(/\.(mp4|webm|ogv)$/gi)},isPreviewableAudio(){return this.meta.name.match(/\.(mp3|wav|ogg|opus|m4a|flac)$/gi)},contentUrl(){var e,t,o;const i=window.location.protocol,s=window.location.host,a=(null==(e=this.$root.config)||null==(e=e.server)?void 0:e.prefix)||"",r=this.$root.room?"?room="+this.$root.room:"",n=null!=(t=null==(o=this.meta)?void 0:o.id)?t:"";return`${i}//${s}${a}/content/${n}${r}`},fileUrl(){var e,t,o;const i=window.location.protocol,s=window.location.host,a=(null==(e=this.$root.config)||null==(e=e.server)?void 0:e.prefix)||"",r=(null==(t=this.meta)?void 0:t.cache)||"",n=encodeURIComponent((null==(o=this.meta)?void 0:o.name)||"file");return`${i}//${s}${a}/file/${r}/${n}`}},methods:{formatTimestamp:me,previewFile(){this.expand?this.expand=!1:this.srcPreview?this.expand=!0:(this.expand=!0,this.isPreviewableVideo||this.isPreviewableAudio?this.srcPreview=`file/${this.meta.cache}/${encodeURIComponent(this.meta.name)}`:(this.loadingPreview=!0,this.loadedPreview=0,this.$http.get(`file/${this.meta.cache}/${encodeURIComponent(this.meta.name)}`,{responseType:"arraybuffer",onDownloadProgress:e=>{this.loadedPreview=e.loaded}}).then(e=>{this.srcPreview=URL.createObjectURL(new Blob([e.data]))}).catch(e=>{e.response&&e.response.data.msg?this.$toast(this.$t("fileFetchFailedMsg",{msg:e.response.data.msg})):this.$toast(this.$t("fileFetchFailed"))}).finally(()=>{this.loadingPreview=!1})))},copyLink(){this.copyToClipboard(this.contentUrl,"copySuccess")},copyToClipboard(e,t="copySuccess",o="copyFailedGeneral"){if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(e).then(()=>this.$toast(this.$t(t))).catch(e=>{console.error("使用 navigator.clipboard 复制失败:",e),this.$toast(this.$t(o))});else try{const i=document.createElement("textarea");i.value=e,i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select();const s=document.execCommand("copy");document.body.removeChild(i),s?this.$toast(this.$t(t)):(console.error("使用 document.execCommand 复制失败"),this.$toast(this.$t(o)))}catch(i){console.error("复制时发生错误:",i),this.$toast(this.$t(o))}},deleteItem(){this.$http.delete("revoke/"+this.meta.id,{params:new URLSearchParams([["room",this.$root.room]])}).then(()=>{!this.expired&&this.meta.cache?this.$http.delete("file/"+this.meta.cache).then(()=>{this.$toast(this.$t("deleteSuccessFile",{name:this.meta.name}))}).catch(e=>{console.error("删除物理文件失败:",e),e.response&&e.response.data.msg?this.$toast(this.$t("deleteFailedFileMsg",{msg:e.response.data.msg})):this.$toast(this.$t("deleteFailedFile"))}):this.$toast(this.$t("deleteSuccessFile",{name:this.meta.name}))}).catch(e=>{e.response&&e.response.data.msg?this.$toast(this.$t("deleteFailedMessageMsg",{msg:e.response.data.msg})):this.$toast(this.$t("deleteFailedMessage"))})},deviceIcon(e){const t=(null==e?void 0:e.toLowerCase())||"";return t.includes("mobile")||t.includes("phone")||t.includes("tablet")||t.includes("ios")||t.includes("android")?N["f"]:N["m"]}}},De=Se,Fe=Object(E["a"])(De,ke,xe,!1,null,null,null),Te=Fe.exports,Pe={name:"home",components:{QrcodeVue:Y["a"],SendText:se,SendFile:ve,ReceivedText:Ce,ReceivedFile:Te},data(){return{fab:!1,dialog:!1,mode:null,pageQrDialogVisible:!1,mdiPlus:N["M"],mdiFileDocumentOutline:N["r"],mdiText:N["Q"],mdiClose:N["j"],mdiQrcode:N["O"],mdiLanConnect:N["z"],mdiLanPending:N["B"],mdiLanDisconnect:N["A"]}},computed:{currentPageUrl(){const e=window.location.href;return this.$root.room,e}},methods:{reconnect(){this.$root.websocket||this.$root.websocketConnecting||(this.$root.retry=0,this.$root.connect())},openDialog(e){this.mode=e,this.dialog=!0,this.$nextTick(()=>{setTimeout(()=>{"text"===e&&this.$refs.sendTextDialog?this.$refs.sendTextDialog.focus():"file"===e&&this.$refs.sendFileDialog&&"function"===typeof this.$refs.sendFileDialog.focus&&this.$refs.sendFileDialog.focus()},300)})},closeDialog(){this.dialog=!1},handlePopState(e){!this.dialog||e.state&&e.state.dialogOpen||this.closeDialog()}},watch:{dialog(e,t){e&&!t?(history.pushState({dialogOpen:!0},null),window.addEventListener("popstate",this.handlePopState)):!e&&t&&(window.removeEventListener("popstate",this.handlePopState),history.state&&history.state.dialogOpen&&history.back())},"$root.received":function(){this.$nextTick(()=>{const e=200;document.documentElement.scrollHeight-window.innerHeight-window.scrollY<e&&window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})}},beforeDestroy(){window.removeEventListener("popstate",this.handlePopState)},beforeRouteEnter(e,t,o){o(t=>t.$root.room=e.query.room||"")},beforeRouteUpdate(e,t,o){this.$root.room=e.query.room||"",o()}},Re=Pe,Ie=Object(E["a"])(Re,G,K,!1,null,null,null),Ae=Ie.exports,Le=o("8270"),Me=o("6b53"),ze=function(){var e=this,t=e._self._c;return t(H["a"],[t(Me["a"],{staticClass:"mx-auto",attrs:{"max-width":"640"}},[t("div",{staticClass:"headline text--primary my-4"},[e._v(e._s(e.$t("connectedDevices")))]),e.$root.websocket?[e._v(" "+e._s(e.$t("devicesConnected",{count:e.$root.device.length,desktop:e.desktopDeviceCount,mobile:e.mobileDeviceCount}))+" "),t(f["a"],{staticClass:"my-2"})]:[e._v(" "+e._s(e.$t("notConnectedToServer"))+" ")],t(b["a"],{attrs:{rounded:"","two-line":""}},[t(C["a"],{attrs:{color:"primary"}},e._l(e.$root.device,(function(o){return t(_["a"],{key:o.id},[t(Le["a"],{attrs:{tile:""}},["desktop"===o.type?["Windows"===o.os.split(" ").shift()?t(y["a"],[e._v(e._s(e.mdiMicrosoftWindows))]):"GNU/Linux"===o.os.split(" ").shift()?t(y["a"],[e._v(e._s(e.mdiLinux))]):"Mac"===o.os.split(" ").shift()?t(y["a"],[e._v(e._s(e.mdiApple))]):t(y["a"],[e._v(e._s(e.mdiLaptop))])]:"smartphone"===o.type||"mobile"===o.type||"tablet"===o.type?["Android"===o.os.split(" ").shift()?t(y["a"],[e._v(e._s(e.mdiAndroid))]):"iOS"===o.os.split(" ").shift()?t(y["a"],[e._v(e._s(e.mdiAppleIos))]):t(y["a"],[e._v(e._s(e.mdiTabletCellphone))])]:t(y["a"],[e._v(e._s(e.mdiDevices))])],2),t(w["a"],[t(w["c"],[e._v(e._s("desktop"===o.type?e.$t("desktopDevice"):"smartphone"===o.type||"mobile"===o.type||"tablet"===o.type?e.$t("mobileDevice"):e.$t("otherDevice")))]),t(w["b"],[e._v(e._s(o.os)+" ("+e._s(o.browser)+")")])],1)],1)})),1)],1)],2)],1)},Oe=[],Ne={data(){return{mdiLaptop:N["C"],mdiMicrosoftWindows:N["G"],mdiApple:N["b"],mdiLinux:N["E"],mdiTabletCellphone:N["P"],mdiAndroid:N["a"],mdiAppleIos:N["c"],mdiDevices:N["n"]}},computed:{desktopDeviceCount(){return this.$root.device.filter(e=>"desktop"===e.type).length},mobileDeviceCount(){return this.$root.device.filter(e=>"smartphone"===e.type||"tablet"===e.type).length}}},Ve=Ne,je=Object(E["a"])(Ve,ze,Oe,!1,null,null,null),Ee=je.exports,Be=function(){var e=this,t=e._self._c;return t(H["a"],{attrs:{"fill-height":""}},[t(T["a"],{staticClass:"pa-3",attrs:{justify:"center",align:"center"}},[t("div",{staticClass:"text-center"},[t("p",{staticClass:"headline my-4"},[e._v(e._s(e.$t("aboutTitle",{version:e.$root.config.version})))]),t("p",[e._v(e._s(e.$t("aboutDesc1"))),t("br"),e._v(e._s(e.$t("aboutDesc2")))]),t("p",[t("a",{attrs:{href:"https://github.com/Jonnyan404/cloud-clipboard-go",target:"_blank"}},[t("img",{attrs:{src:"https://img.shields.io/github/stars/TransparentLC/cloud-clipboard.svg?style=social"}})])]),t("p",{staticClass:"text--secondary"},[t("small",[e._v(e._s(e.$t("donatePrompt")))])])])])],1)},Ue=[],qe={},He=qe,Qe=Object(E["a"])(He,Be,Ue,!1,null,null,null),We=Qe.exports;i["a"].use(q["a"]);const Je=new q["a"]({routes:[{path:"/",component:Ae,meta:{keepAlive:!0}},{path:"/device",component:Ee,meta:{keepAlive:!0}},{path:"/about",component:We,meta:{keepAlive:!0}}]});var Ge=Je,Ke=o("f309"),Ye=o("2db4"),Xe=o("87f6"),Ze=o.n(Xe);const et=new Ke["a"]({icons:{iconfont:"mdiSvg"}});i["a"].use(Ke["a"],{components:{VSnackbar:Ye["a"],VBtn:d["a"],VIcon:y["a"]}}),i["a"].use(Ze.a,{$vuetify:et.framework,x:"",color:"",closeText:"关闭",closeColor:"accent"});var tt=et,ot={data(){return{websocket:null,websocketConnecting:!1,authCode:localStorage.getItem("auth")||"",authCodeDialog:!1,room:this.$router.currentRoute.query.room||"",roomInput:"",roomDialog:!1,retry:0,date:new Date,event:{receive:e=>{this.$root.received.unshift(e)},receiveMulti:e=>{this.$root.received.unshift(...Array.from(e).reverse())},revoke:e=>{let t=this.$root.received.findIndex(t=>t.id===e.id);-1!==t&&this.$root.received.splice(t,1)},config:e=>{this.$root.config=e,console.log(`%c Cloud Clipboard ${e.version} by Jonnyan404 %c https://github.com/Jonnyan404/cloud-clipboard-go `,"color:#fff;background-color:#1e88e5","color:#fff;background-color:#64b5f6")},connect:e=>{this.$root.device.push(e)},disconnect:e=>{let t=this.$root.device.findIndex(t=>t.id===e.id);-1!==t&&this.$root.device.splice(t,1)},forbidden:()=>{this.authCode="",localStorage.removeItem("auth")}}}},watch:{room(){this.disconnect(),this.connect()}},methods:{connect(){this.websocketConnecting=!0,this.$toast(this.$t("connectingServer")),this.$http.get("server").then(e=>(this.authCode&&localStorage.setItem("auth",this.authCode),new Promise((t,o)=>{const i=new URL(e.data.server);if(i.protocol="https:"===location.protocol?"wss:":"ws:",i.port=location.port,e.data.auth){if(!this.authCode)return void(this.authCodeDialog=!0);i.searchParams.set("auth",this.authCode)}i.searchParams.set("room",this.room);const s=new WebSocket(i);s.onopen=()=>t(s),s.onerror=o}))).then(e=>{this.websocket=e,this.websocketConnecting=!1,this.retry=0,this.received=[],this.$toast(this.$t("connectionSuccess")),setInterval(()=>{e.send("")},3e4),e.onclose=()=>{this.websocket=null,this.websocketConnecting=!1,this.device.splice(0),this.retry<3?(this.retry++,this.$toast(this.$t("reconnectingServer",{retry:this.retry})),setTimeout(()=>this.connect(),3e3)):this.authCode&&(this.authCodeDialog=!0)},e.onmessage=e=>{try{let t=JSON.parse(e.data);(this.event[t.event]||(()=>{}))(t.data)}catch{}}}).catch(e=>{this.websocketConnecting=!1,this.failure()})},disconnect(){this.websocketConnecting=!1,this.websocket&&(this.websocket.onclose=()=>{},this.websocket.close(),this.websocket=null),this.$root.device=[]},failure(){localStorage.removeItem("auth"),this.websocket=null,this.$root.device=[],this.retry++<3?this.connect():this.$toast.error(this.$t("connectionFailedRetry"),{showClose:!1,dismissable:!1,timeout:-1})}},mounted(){this.connect()}},it=o("cee4"),st=o("a7fe"),at=o.n(st),rt=o("9aa5"),nt=o.n(rt),lt=o("a925"),ct=o("edd4"),dt=o("3504"),mt=o("9ea5"),ut=o("0423");i["a"].use(lt["a"]);const pt={en:ct,zh:dt,"zh-TW":mt,ja:ut};function ht(){const e=navigator.language||navigator.userLanguage,t=e.toLowerCase();return t.startsWith("zh-tw")||t.startsWith("zh-hk")?"zh-TW":t.startsWith("zh")?"zh":t.startsWith("ja")?"ja":"en"}const vt=new lt["a"]({locale:localStorage.getItem("locale")||ht(),fallbackLocale:"en",messages:pt});var gt=vt;o("d4b8");i["a"].config.productionTip=!1,i["a"].use(at.a,it["a"]),i["a"].directive("linkified",nt.a),i["a"].filter("prettyFileSize",ce),i["a"].filter("percentage",de),i["a"].filter("formatTimestamp",me);const ft=new i["a"]({mixins:[ot],data(){return{date:new Date,dark:null,config:{version:"",text:{limit:0},file:{expire:0,chunk:0,limit:0}},send:{text:"",files:[]},received:[],device:[],showTimestamp:null===localStorage.getItem("showTimestamp")||"true"===localStorage.getItem("showTimestamp"),showDeviceInfo:null!==localStorage.getItem("showDeviceInfo")&&"true"===localStorage.getItem("showDeviceInfo"),showSenderIP:null!==localStorage.getItem("showSenderIP")&&"true"===localStorage.getItem("showSenderIP")}},router:Ge,vuetify:tt,i18n:gt,render:e=>e(U),watch:{dark(e){this.$vuetify.theme.dark=this.useDark,localStorage.setItem("darkmode",e)},showTimestamp(e){localStorage.setItem("showTimestamp",e)},showDeviceInfo(e){localStorage.setItem("showDeviceInfo",e)},showSenderIP(e){localStorage.setItem("showSenderIP",e)}},computed:{useDark:{cache:!1,get(){switch(this.dark){case"time":const e=(new Date).getHours();return e<7||e>=19;case"prefer":return window.matchMedia("(prefers-color-scheme: dark)").matches;case"enable":return!0;case"disable":return!1;default:return!1}}}},mounted(){this.dark=localStorage.getItem("darkmode")||"prefer",this.$vuetify.theme.dark=this.useDark,setInterval(()=>{this.date=new Date,this.$vuetify.theme.dark=this.useDark},1e3)}});it["a"].interceptors.request.use(e=>(ft.authCode&&(e.headers.Authorization="Bearer "+ft.authCode),e)),ft.$mount("#app")},"9ea5":function(e){e.exports=JSON.parse('{"clipboard":"剪貼簿","deviceList":"裝置列表","darkMode":"深色模式","switchByTime":"根據時間切換","switchByTimeDesc":"在 19:00 到次日 7:00 期間啟用","switchBySystem":"根據系統設定切換","switchBySystemDesc":"使用 prefers-color-scheme 偵測","keepEnabled":"保持啟用","keepDisabled":"保持停用","changeThemeColor":"更改主題顏色","about":"關於","language":"語言","cloudClipboard":"雲剪貼簿","room":"房間","copyRoomName":"點擊複製","copiedRoomName":"已複製房間名稱：{room}","copyFailed":"複製失敗：{err}","clearClipboard":"清空剪貼簿","enterRoom":"進入房間","connected":"已連線","connecting":"連線中","disconnected":"未連線，點擊重連","selectThemeColor":"選擇主題顏色","ok":"確定","cancel":"取消","authRequired":"需要認證","authPrompt":"此剪貼簿服務並非公開，請輸入密碼以繼續連線。","password":"密碼","submit":"提交","clipboardRoom":"剪貼簿房間","roomPrompt1":"輸入任意名稱建立新房間，或進入已有的房間。留空則表示使用預設的全域房間。","roomPrompt2":"在房間中傳送的內容僅限房間內可見，儲存的歷史記錄數量仍然會受到全域設定的限制。","roomName":"房間名稱","clearClipboardConfirmTitle":"清空剪貼簿","clearClipboardConfirmText":"是否要清空目前房間的所有剪貼簿內容？","sendText":"傳送文字","sendFile":"傳送檔案","enterTextToSend":"請輸入需要傳送的文字","send":"傳送","selectFileToSend":"選擇要傳送的檔案","dragDropPasteTip":"（支援拖曳和 Ctrl+V 貼上螢幕截圖）","fileSizeLimit":"檔案大小限制：{limit}","textMessage":"文字訊息","copyText":"複製文字","copyLink":"複製連結","delete":"刪除","fileMessage":"檔案訊息","fileSize":"檔案大小","expiredAt":"已於 {time} 過期","willExpireAt":"將於 {time} 過期","download":"下載","expired":"已過期","preview":"預覽","alreadyAtBottom":"已經到底了喔～","emptyHere":"這裡空空的","connectedDevices":"已連線的裝置列表","devicesConnected":"已有 {count} 個裝置連線，桌面端裝置 {desktop} 個，行動端裝置 {mobile} 個。","notConnectedToServer":"未連線到伺服器。","desktopDevice":"桌面端裝置","mobileDevice":"行動端裝置","otherDevice":"其他類型裝置","aboutTitle":"雲剪貼簿 {version}","aboutDesc1":"在區域網路內互傳純文字和檔案的雲剪貼簿","aboutDesc2":"即開即用的網頁版，無須安裝 APP","donatePrompt":"如果你覺得這個工具很好用，歡迎贊助支持開發者～","cannotSendEmptyFile":"不能傳送空檔案","fileSizeExceeded":"檔案大小超過限制（{limit}）","sendSuccess":"傳送成功","sendFailed":"傳送失敗","sendFailedMsg":"傳送失敗：{msg}","fileFetchFailed":"檔案取得失敗","fileFetchFailedMsg":"檔案取得失敗：{msg}","copySuccess":"複製成功","copyFailedGeneral":"複製失敗","copyFailedError":"複製失敗：{err}","deleteSuccessFile":"已刪除檔案 {name}","deleteFailedFile":"檔案刪除失敗","deleteFailedFileMsg":"檔案刪除失敗：{msg}","deleteFailedMessage":"訊息刪除失敗","deleteFailedMessageMsg":"訊息刪除失敗：{msg}","deleteSuccessText":"已刪除文字訊息","clearClipboardFailed":"清空剪貼簿失敗","clearClipboardFailedMsg":"清空剪貼簿失敗：{msg}","connectingServer":"正在連線伺服器……","reconnectingServer":"未能連線到伺服器，正在嘗試第 {retry} 次重連……","connectionSuccess":"連線伺服器成功","connectionFailedRetry":"連線伺服器失敗，請點擊工具列上的「連線」圖示重試","displaySettings":"顯示設定","showTimestamp":"顯示時間戳","showDeviceInfo":"顯示裝置資訊","showSenderIP":"顯示傳送者IP","clipboardClearedRefresh":"剪貼簿已清空，重新整理當前頁面生效","showQrCode":"顯示二維碼","scanToAccess":"掃碼存取","close":"關閉","scanToAccessPage":"手機掃碼存取目前頁面","roomList":"房間列表","rooms":"個房間","searchRooms":"搜尋房間...","loadingRooms":"正在載入房間列表...","noRoomsFound":"沒有找到房間","publicRoom":"公共房間","active":"活躍","inactive":"非活躍","messages":"訊息","devices":"設備","lastActive":"最後活躍","never":"從未","justNow":"剛剛","minutesAgo":"{minutes} 分鐘前","hoursAgo":"{hours} 小時前","daysAgo":"{days} 天前","failedToLoadRooms":"載入房間列表失敗","addedToFavorites":"已將 {room} 新增至收藏","removedFromFavorites":"已將 {room} 從收藏中移除"}')},edd4:function(e){e.exports=JSON.parse('{"clipboard":"Clipboard","deviceList":"Device List","darkMode":"Dark Mode","switchByTime":"Switch by Time","switchByTimeDesc":"Enable between 19:00 and 07:00","switchBySystem":"Switch by System Setting","switchBySystemDesc":"Use prefers-color-scheme detection","keepEnabled":"Keep Enabled","keepDisabled":"Keep Disabled","changeThemeColor":"Change Theme Color","about":"About","language":"Language","cloudClipboard":"Cloud Clipboard","room":"Room","copyRoomName":"Copy Room Name","copiedRoomName":"Copied room name: {room}","copyFailed":"Copy failed: {err}","clearClipboard":"Clear Clipboard","enterRoom":"Enter Room","connected":"Connected","connecting":"Connecting","disconnected":"Disconnected, click to reconnect","selectThemeColor":"Select Theme Color","ok":"OK","cancel":"Cancel","authRequired":"Authentication Required","authPrompt":"This clipboard service is not public. Please enter the password to continue.","password":"Password","submit":"Submit","clipboardRoom":"Clipboard Room","roomPrompt1":"Enter any name to create a new room or join an existing one. Leave blank for the default global room.","roomPrompt2":"Content sent in a room is only visible within that room. The number of history records is still limited by the global setting.","roomName":"Room Name","clearClipboardConfirmTitle":"Clear Clipboard","clearClipboardConfirmText":"Are you sure you want to clear all clipboard content in the current room?","sendText":"Send Text","sendFile":"Send File","enterTextToSend":"Enter text to send","send":"Send","selectFileToSend":"Select file to send","dragDropPasteTip":"(Drag & drop and Ctrl+V paste screenshot supported)","fileSizeLimit":"File size limit: {limit}","textMessage":"Text Message","copyText":"Copy Text","copyLink":"Copy Link","delete":"Delete","fileMessage":"File Message","fileSize":"File Size","expiredAt":"Expired at {time}","willExpireAt":"Will expire at {time}","download":"Download","expired":"Expired","preview":"Preview","alreadyAtBottom":"Already at the bottom~","emptyHere":"It\'s empty here","connectedDevices":"Connected Devices","devicesConnected":"{count} devices connected, {desktop} desktop, {mobile} mobile.","notConnectedToServer":"Not connected to server.","desktopDevice":"Desktop Device","mobileDevice":"Mobile Device","otherDevice":"Other Device Type","aboutTitle":"Cloud Clipboard {version}","aboutDesc1":"A cloud clipboard for transferring plain text and files within a local network.","aboutDesc2":"Web version ready to use, no APP installation required.","donatePrompt":"If you find this tool useful, consider donating to support the developer~","cannotSendEmptyFile":"Cannot send empty file","fileSizeExceeded":"File size exceeds limit ({limit})","sendSuccess":"Send successful","sendFailed":"Send failed","sendFailedMsg":"Send failed: {msg}","fileFetchFailed":"File fetch failed","fileFetchFailedMsg":"File fetch failed: {msg}","copySuccess":"Copy successful","copyFailedGeneral":"Copy failed","copyFailedError":"Copy failed: {err}","deleteSuccessFile":"Deleted file {name}","deleteFailedFile":"File deletion failed","deleteFailedFileMsg":"File deletion failed: {msg}","deleteFailedMessage":"Message deletion failed","deleteFailedMessageMsg":"Message deletion failed: {msg}","deleteSuccessText":"Deleted text message","clearClipboardFailed":"Clear clipboard failed","clearClipboardFailedMsg":"Clear clipboard failed: {msg}","connectingServer":"Connecting to server...","reconnectingServer":"Failed to connect to server, trying to reconnect attempt {retry}...","connectionSuccess":"Connected to server successfully","connectionFailedRetry":"Failed to connect to server, please click the \'Connect\' icon in the toolbar to retry","displaySettings":"Display Settings","showTimestamp":"Show Timestamp","showDeviceInfo":"Show Device Info","showSenderIP":"Show Sender IP","clipboardClearedRefresh":"Clipboard cleared, refresh the page to take effect","showQrCode":"Show QR Code","scanToAccess":"Scan to Access","close":"Close","scanToAccessPage":"Scan with Mobile to Access Current Page","roomList":"Room List","rooms":"rooms","loadingRooms":"Loading rooms...","noRoomsFound":"No rooms found","searchRooms":"Search rooms","publicRoom":"Public Room","messages":"Messages","devices":"Devices","lastActive":"Last Active","active":"Active","inactive":"Inactive","never":"Never","justNow":"Just now","minutesAgo":"{minutes} minutes ago","hoursAgo":"{hours} hours ago","daysAgo":"{days} days ago","failedToLoadRooms":"Failed to load room list","addedToFavorites":"Added {room} to favorites","removedFromFavorites":"Removed {room} from favorites"}')}});